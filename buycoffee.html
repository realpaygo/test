<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buy Coffee ‚Äî Support Max Tech</title>

  <!-- Lottie -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.6/lottie.min.js"></script>
  <!-- SweetAlert -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root {
      --bg:#f7fbff;
      --card:#ffffff;
      --accent:#1a73e8;
      --muted:#666;
    }
    body {
      margin:0;
      font-family: "Segoe UI", Inter, Arial, sans-serif;
      background:var(--bg);
      color:#111;
      transition: background 0.3s, color 0.3s;
    }
    body.dark {
      background: #121212;
      color: #fff;
    }
    body.dark .account-card {
      background: #1e1e1e;
      box-shadow: 0 4px 10px rgba(255,255,255,0.05);
    }
    header {
      background:var(--accent);
      color:#fff;
      padding:18px 20px;
      display:flex;
      align-items:center;
      gap:12px;
    }
    header h1{font-size:18px;margin:0}
    .container {
      max-width:820px;
      margin:20px auto;
      padding:18px;
    }
    .anim {width:120px;height:120px;margin:0 auto 20px;}
    .intro {text-align:center;margin-bottom:20px;}

    /* Account Card */
    .account-card {
      background:var(--card);
      border-radius:14px;
      padding:22px 20px;
      box-shadow:0 6px 18px rgba(26,115,232,0.08);
      margin-bottom:20px;
    }
    .account-top {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    .account-top .bank {
      font-weight:700;
      font-size:16px;
    }
    .account-top .copyable {
      font-weight:700;
      font-size:18px;
      cursor:pointer;
      padding:4px 10px;
      border-radius:6px;
      background:#f0f4ff;
      transition:background 0.2s;
      user-select:all;
    }
    .account-top .copyable:hover {
      background:#e0eaff;
    }
    .account-card .name {
      font-weight:700;
      font-size:17px;
      margin-top:6px;
    }
    .note {
      font-size:13px;
      color:var(--muted);
      margin-top:4px;
    }

    /* Upload + Submit */
    .file-box{margin:18px 0;text-align:center}
    input[type=file]{display:none}
    .upload-link {
      color:var(--accent);
      cursor:pointer;
      text-decoration:underline;
      font-weight:600;
      font-size:15px;
    }
    .file-preview {
      margin-top:12px;
      font-size:14px;
      color:#333;
    }
    .preview-img {
      width:100px;
      height:70px;
      object-fit:cover;
      border-radius:6px;
      border:1px solid #ddd;
    }
    .submit-btn {
      margin-top:14px;
      background:var(--accent);
      color:#fff;
      border:0;
      padding:12px 20px;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .submit-btn:disabled {
      background:#aaa;
      cursor:not-allowed;
    }
    footer {
      margin-top:24px;
      text-align:center;
      font-size:13px;
      color:var(--muted);
    }
  </style>
</head>
<body>

  <header style="display:flex;align-items:center;gap:12px;position:relative;">
    <img src="images/back.png" alt="back" id="backArrow" style="height:24px;cursor:pointer;">
    <i class="fa-solid fa-mug-hot"></i>
    <h1 style="flex:1;">Buy a Coffee ‚Äî Support Max Tech</h1>
    <button class="theme-toggle" id="themeToggle" style="background:var(--accent);border:none;color:#fff;padding:8px 12px;border-radius:20px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:6px;">
      <i class="fa-solid fa-moon"></i>
    </button>
  </header>

  <div class="container">
    <div class="anim" id="animContainer"></div>

    <div class="intro">
      <p style="margin:0;font-weight:700">Thanks for supporting Max Tech ‚òï</p>
      <p style="color:#555;font-size:14px;">Send a donation to the account below and attach your receipt.</p>
    </div>

    <!-- Account card -->
    <div class="account-card">
      <div class="account-top">
        <div class="bank">üè¶ <b>Sparkle Bank</b></div>
        <div class="copyable" onclick="copyText('1002842185')">1002842185</div>
      </div>
      <div class="name">üë§ <b>Nwite Ebuka</b></div>
      <div class="note">(Tap account number to copy)</div>
    </div>

    <!-- Upload -->
    <div class="file-box">
      <label for="receiptInput" class="upload-link">
        üìé Upload Receipt
      </label>
      <input id="receiptInput" type="file" accept="image/*,application/pdf" />
      <div class="file-preview" id="previewArea">No file selected</div>

      <button id="submitBtn" class="submit-btn" onclick="submitReceipt()" disabled>
        <i class="fa-solid fa-paper-plane"></i> Submit & Send
      </button>
    </div>

    <footer>
      After upload, click <b>Submit & Send</b>. Your receipt will download to your device for attaching in WhatsApp.
    </footer>
  </div>

  <script>
    // Theme persistence and toggle
    const themeBtn = document.getElementById('themeToggle');
    function setThemeFromStorage() {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
        if(themeBtn) themeBtn.innerHTML = '<i class="fa-solid fa-sun"></i>';
      } else {
        document.body.classList.remove('dark');
        if(themeBtn) themeBtn.innerHTML = '<i class="fa-solid fa-moon"></i>';
      }
    }
    setThemeFromStorage();
    if(themeBtn) themeBtn.onclick = function() {
      document.body.classList.toggle('dark');
      if(document.body.classList.contains('dark')) {
        localStorage.setItem('theme', 'dark');
        themeBtn.innerHTML = '<i class="fa-solid fa-sun"></i>';
      } else {
        localStorage.setItem('theme', 'light');
        themeBtn.innerHTML = '<i class="fa-solid fa-moon"></i>';
      }
    };
    // Back arrow to dashboard
    document.getElementById('backArrow').onclick = function() {
      window.location.href = 'index.html';
    };
    const WHATSAPP_NUMBER = "2349020388011";
    const ACCOUNT = {
      bank: "Sparkle Bank",
      name: "Nwite Ebuka",
      number: "1002842185"
    };

    // Lottie animation
    lottie.loadAnimation({
      container: document.getElementById('animContainer'),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: 'https://assets10.lottiefiles.com/packages/lf20_4kx2q32n.json'
    });

    // Copy account number
    function copyText(text){
      navigator.clipboard.writeText(text).then(()=>{
        Swal.fire({
          icon:'success',
          title:'Copied!',
          text:'Account number copied',
          timer:1200,
          showConfirmButton:false
        });
      });
    }

    // File handling
    const receiptInput=document.getElementById('receiptInput');
    const preview=document.getElementById('previewArea');
    const submitBtn=document.getElementById('submitBtn');
    let file=null;

    receiptInput.addEventListener('change',e=>{
      file=e.target.files[0];
      if(!file){preview.textContent="No file selected";submitBtn.disabled=true;return;}
      if(file.type.startsWith("image/")){
        const img=document.createElement("img");
        img.className="preview-img";
        img.src=URL.createObjectURL(file);
        preview.innerHTML="";
        preview.appendChild(img);
      } else {
        preview.textContent=file.name;
      }
      submitBtn.disabled=false;
    });

    function submitReceipt(){
      if(!file) return;
      const reader=new FileReader();
      reader.onload=function(e){
        const blob=new Blob([e.target.result],{type:file.type});
        const url=URL.createObjectURL(blob);
        const a=document.createElement("a");
        a.href=url;
        a.download=`receipt-${ACCOUNT.number}.${file.name.split(".").pop()}`;
        document.body.appendChild(a);
        a.click();a.remove();

        const message=encodeURIComponent(
`Hello Max Tech üëã
I donated to your account:

Bank: ${ACCOUNT.bank}
Name: ${ACCOUNT.name}
Account Number: ${ACCOUNT.number}

Please find my receipt attached.`
        );
        Swal.fire({
          icon:'info',
          title:'Almost done',
          text:'Receipt saved to your device. Please attach it in WhatsApp.',
          confirmButtonText:'Open WhatsApp'
        }).then(r=>{
          if(r.isConfirmed){
            window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${message}`,'_blank');
          }
        });
        setTimeout(()=>URL.revokeObjectURL(url),30000);
      }
      reader.readAsArrayBuffer(file);
    }
  </script>
</body>
</html>
